<?xml version="1.0"?>
<!--
  Copyright (C) 2025 HelixScreen Contributors
  SPDX-License-Identifier: GPL-3.0-or-later

  G-Code Viewer Test Panel

  Test/demonstration panel for the 3D G-code visualization widget.
  Accessible via: ./build/bin/helix-ui-proto -p gcode-test

  Features demonstrated:
  - Basic gcode_viewer widget usage
  - Full-screen 3D visualization
  - Touch gesture controls (drag to rotate)
  - Camera control buttons
  - View preset buttons
-->
<component>
  <view extends="lv_obj" width="100%" height="100%" style_pad_all="0" style_border_width="0" flex_flow="column">

    <!-- Header -->
    <ui_card width="100%" height="#header_height" flex_flow="row" style_pad_all="#padding_card" style_pad_gap="#gap_normal" style_flex_main_place="space_between" style_flex_cross_place="center">
      <lv_label text="G-Code 3D Viewer Test" style_text_font="#heading_font" style_text_color="#text_primary"/>
    </ui_card>

    <!-- Main content area: rendering (left) + controls (right) -->
    <lv_obj width="100%" flex_grow="1" flex_flow="row" style_pad_all="0" style_border_width="0" style_bg_opa="0">

      <!-- Left: G-Code Viewer (takes remaining space) -->
      <gcode_viewer
        name="gcode_viewer"
        flex_grow="1"
        height="100%"
        style_bg_color="#card_bg"
        style_bg_opa="255"
      />

      <!-- Right: Controls Panel -->
      <ui_card width="240" height="100%" flex_flow="column" style_pad_all="#padding_small" style_pad_gap="#gap_tiny">

        <!-- View Presets -->
        <lv_label text="View Presets" style_text_font="#body_font" style_text_color="#text_primary"/>
        <!-- Row 1: Isometric, Top, Front -->
        <lv_obj flex_flow="row" style_pad_gap="#gap_tiny" width="100%" height="36" style_bg_opa="0" style_border_width="0" style_pad_all="0">
          <lv_button name="btn_isometric" flex_grow="1" height="36">
            <lv_label text="Iso" style_text_font="#body_font" style_text_align="center"/>
            <event_cb trigger="clicked" callback="on_view_preset_clicked"/>
          </lv_button>
          <lv_button name="btn_top" flex_grow="1" height="36">
            <lv_label text="Top" style_text_font="#body_font" style_text_align="center"/>
            <event_cb trigger="clicked" callback="on_view_preset_clicked"/>
          </lv_button>
          <lv_button name="btn_front" flex_grow="1" height="36">
            <lv_label text="Front" style_text_font="#body_font" style_text_align="center"/>
            <event_cb trigger="clicked" callback="on_view_preset_clicked"/>
          </lv_button>
        </lv_obj>
        <!-- Row 2: Side, Reset -->
        <lv_obj flex_flow="row" style_pad_gap="#gap_tiny" width="100%" height="36" style_bg_opa="0" style_border_width="0" style_pad_all="0">
          <lv_button name="btn_side" flex_grow="1" height="36">
            <lv_label text="Side" style_text_font="#body_font" style_text_align="center"/>
            <event_cb trigger="clicked" callback="on_view_preset_clicked"/>
          </lv_button>
          <lv_button name="btn_reset" flex_grow="1" height="36">
            <lv_label text="Reset" style_text_font="#body_font" style_text_align="center"/>
            <event_cb trigger="clicked" callback="on_view_preset_clicked"/>
          </lv_button>
        </lv_obj>

        <!-- Divider -->
        <lv_obj width="100%" height="1" style_bg_color="#divider" style_bg_opa="128" style_pad_all="0" style_border_width="0"/>

        <!-- Zoom -->
        <lv_label text="Zoom" style_text_font="#body_font" style_text_color="#text_primary"/>
        <lv_obj flex_flow="row" style_pad_gap="#gap_tiny" width="100%" height="36" style_bg_opa="0" style_border_width="0" style_pad_all="0">
          <lv_button name="btn_zoom_in" flex_grow="1" height="36">
            <lv_label text="+" style_text_font="#heading_font" style_text_align="center"/>
            <event_cb trigger="clicked" callback="on_zoom_clicked"/>
          </lv_button>
          <lv_button name="btn_zoom_out" flex_grow="1" height="36">
            <lv_label text="-" style_text_font="#heading_font" style_text_align="center"/>
            <event_cb trigger="clicked" callback="on_zoom_clicked"/>
          </lv_button>
        </lv_obj>

        <!-- Divider -->
        <lv_obj width="100%" height="1" style_bg_color="#divider" style_bg_opa="128" style_pad_all="0" style_border_width="0"/>

        <!-- File -->
        <lv_label text="File" style_text_font="#body_font" style_text_color="#text_primary"/>
        <lv_button name="btn_load_test" width="100%" height="40">
          <lv_label text="Load File..." style_text_font="#body_font" style_text_align="center"/>
          <event_cb trigger="clicked" callback="on_load_test_file"/>
        </lv_button>
        <lv_button name="btn_clear" width="100%" height="36">
          <lv_label text="Clear" style_text_font="#body_font" style_text_align="center"/>
          <event_cb trigger="clicked" callback="on_clear"/>
        </lv_button>

        <!-- Spacer -->
        <lv_obj flex_grow="1" style_bg_opa="0" style_border_width="0" style_pad_all="0"/>

        <!-- Stats -->
        <lv_obj width="100%" height="1" style_bg_color="#divider" style_bg_opa="128" style_pad_all="0" style_border_width="0"/>
        <lv_label text="Statistics" style_text_font="#body_font" style_text_color="#text_primary"/>
        <lv_label name="stats_label" text="No file loaded" style_text_font="#body_font" style_text_color="#text_secondary" width="100%"/>
      </ui_card>

    </lv_obj>

  </view>
</component>
